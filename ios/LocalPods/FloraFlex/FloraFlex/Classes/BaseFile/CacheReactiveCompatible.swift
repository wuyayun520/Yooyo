
//: Declare String Begin

/*: "TalkingAddrServerUrlSelectIndexKey" :*/
fileprivate let kStr_bottomValue:[UInt8] = [0x8,0x15,0x20,0x1f,0x1d,0x22,0x1b,0xf5,0x18,0x18,0x26,0x7,0x19,0x26,0x2a,0x19,0x26,0x9,0x26,0x20,0x7,0x19,0x20,0x19,0x17,0x28,0xfd,0x22,0x18,0x19,0x2c,0xff,0x19,0x2d]

fileprivate func buttonList(mode num: UInt8) -> UInt8 {
    let value = Int(num) - 180
    if value < 0 {
        return UInt8(value + 256)
    } else {
        return UInt8(value)
    }
}

/*: "TalkingAppleLoginNickNameKey" :*/
fileprivate let kStr_hiddenValue:String = "value play selfTalki"
fileprivate let kStr_userTitle:String = "eLoglength self"
fileprivate let kStr_indexName:String = "if server share contentNameKey"

/*: "TalkingLoginUidCacheKey" :*/
fileprivate let kStr_nativeData:[Character] = ["T","a","l","k","i","n"]
fileprivate let kStr_backgroundName:[Character] = ["g","L","o","g","i","n","U","i","d","C","a","c","h","e","K","e","y"]

/*: "TalkingLoginUserInfoCacheKey" :*/
fileprivate let kStr_addName:[Character] = ["T","a","l","k","i","n","g","L","o","g","i","n","U","s","e","r","I","n","f","o"]
fileprivate let kStr_ofValue:String = "Cachelse info app"

/*: "TalkingLastLoginTypeCacheKey" :*/
fileprivate let kStr_targetName:String = "var sizeTalki"
fileprivate let kStr_clearData:String = "true detail mainstLo"
fileprivate let kStr_userValue:String = "for frame crushpeC"
fileprivate let kStr_nameItemTitle:[Character] = ["a","c","h","e","K","e","y"]

/*: "TalkingLoginUserConfigKey" :*/
fileprivate let kStr_enableTitle:[Character] = ["T","a","l","k","i","n","g","L","o","g","i","n","U","s","e","r","C","o","n","f","i","g","K","e"]
fileprivate let kStr_statusText:String = "style"

/*: "TalkingAppConfigKey" :*/
fileprivate let kStr_screenValue:String = "Talklong after status extension move"
fileprivate let kStr_layerContent:String = "let blue view clickpConfigKe"
fileprivate let kStr_equalTargetData:String = "pick"

/*: "TalkingUserTagCacheUrlKey" :*/
fileprivate let kStr_timeShowBackgroundName:[Character] = ["T","a","l","k","i","n","g","U","s","e","r","T","a","g","C"]
fileprivate let kStr_shareName:[Character] = ["a","c","h","e","U","r","l","K","e","y"]

/*: "TalkingUserCookiesKey" :*/
fileprivate let kStr_indexContent:String = "Talkiview with"
fileprivate let kStr_viewName:[Character] = ["C","o"]
fileprivate let kStr_innerMapText:[Character] = ["o","k","i","e","s","K","e","y"]

/*: "TalkingHomeTabTurnOnNotificationsKey" :*/
fileprivate let kStr_backData:[UInt8] = [0x7a,0x87,0x92,0x91,0x8f,0x94,0x8d,0x6e,0x95,0x93,0x8b,0x7a,0x87,0x88,0x7a,0x9b,0x98,0x94,0x75,0x94,0x74,0x95,0x9a,0x8f,0x8c,0x8f,0x89,0x87,0x9a,0x8f,0x95,0x94,0x99,0x71,0x8b,0x9f]

fileprivate func makeWhere(push num: UInt8) -> UInt8 {
    let value = Int(num) - 38
    if value < 0 {
        return UInt8(value + 256)
    } else {
        return UInt8(value)
    }
}

/*: "TalkingMessageTabTurnOnNotificationsKey" :*/
fileprivate let kStr_contentLoadData:[UInt8] = [0x6b,0x5e,0x53,0x54,0x56,0x51,0x58,0x72,0x5a,0x4c,0x4c,0x5e,0x58,0x5a,0x6b,0x5e,0x5d,0x6b,0x4a,0x4d,0x51,0x70,0x51,0x71,0x50,0x4b,0x56,0x59,0x56,0x5c,0x5e,0x4b,0x56,0x50,0x51,0x4c,0x74,0x5a,0x46]

private func toMake(text num: UInt8) -> UInt8 {
    return num ^ 63
}

/*: "TalkingMessageTabCloseNotificationsKey" :*/
fileprivate let kStr_managerOverData:[UInt8] = [0x9a,0xaf,0xa2,0xa5,0xa7,0xa0,0xa9,0x83,0xab,0xbd,0xbd,0xaf,0xa9,0xab,0x9a,0xaf,0xac,0x8d,0xa2,0xa1,0xbd,0xab,0x80,0xa1,0xba,0xa7,0xa8,0xa7,0xad,0xaf,0xba,0xa7,0xa1,0xa0,0xbd,0x85,0xab,0xb7]

private func fromTransform(load num: UInt8) -> UInt8 {
    return num ^ 206
}

/*: "TalkingCallShowTag" :*/
fileprivate let kStr_regularToValue:String = "Talkiplayer true input"
fileprivate let kStr_backgroundData:String = "list photo to tollShowTag"

/*: "TalkingFirstShowIntimateGuide" :*/
fileprivate let kStr_messageData:String = "Talkinadd case"
fileprivate let kStr_succeedAddName:String = "let all maketSho"
fileprivate let kStr_likeToForContent:String = "mateGmessage true icon"

/*: "TalkingFreeTipsViewIsShow_ :*/
fileprivate let kStr_clickData:String = "max burn status viewTalk"
fileprivate let kStr_positionTitle:String = "eTipsVietarget text to"
fileprivate let kStr_modeTargetText:String = "wIsShow_value touch section view"

/*: "TalkingLiveTabExplainIsShow_ :*/
fileprivate let kStr_modelContent:String = "data model not scaleTalk"
fileprivate let kStr_tempValue:[Character] = ["a","b","E","x","p","l","a","i","n","I","s","S","h","o","w","_"]

/*: "TalkingMaleUnsubscribedAlertIsShow_ :*/
fileprivate let kStr_levelClearContent:[UInt8] = [0x45,0x70,0x7d,0x7a,0x78,0x7f,0x76,0x5c,0x70,0x7d,0x74,0x44,0x7f,0x62,0x64,0x73,0x62,0x72,0x63,0x78,0x73,0x74,0x75,0x50,0x7d,0x74,0x63,0x65,0x58,0x62,0x42,0x79,0x7e,0x66,0x4e]

private func moreNor(view num: UInt8) -> UInt8 {
    return num ^ 17
}

/*: "TalkingAIIntimacyViewIsShow" :*/
fileprivate let kStr_indexTitle:[Character] = ["T","a","l","k","i","n","g","A","I","I","n"]
fileprivate let kStr_beforeTableText:String = "tuser"
fileprivate let kStr_taskData:[Character] = ["m","a","c","y","V","i","e","w","I","s","S","h","o","w"]

/*: "isFirstShowAnimatCacheKey" :*/
fileprivate let kStr_tingValue:[Character] = ["i","s","F","i","r","s","t","S"]
fileprivate let kStr_leadingData:String = "arc"
fileprivate let kStr_originTitle:String = "source inside let make popowAni"
fileprivate let kStr_succeedData:String = "cheKeyself guard"

/*: "isFirstShowMatchTipsViewCacheKey" :*/
fileprivate let kStr_textValue:[UInt8] = [0xe8,0xf2,0xc7,0xe8,0xf3,0xf2,0xf5,0xd2,0xe9,0xee,0xf6,0xcc,0xe0,0xf5,0xe2,0xe9,0xd5,0xe8,0xf1,0xf2,0xd7,0xe8,0xe4,0xf6,0xc2,0xe0,0xe2,0xe9,0xe4,0xca,0xe4,0xf8]

private func requestReply(price num: UInt8) -> UInt8 {
    return num ^ 129
}

/*: "isShowCleanAnimatCacheKey" :*/
fileprivate let kStr_frameByKeyData:String = "isShowtrue var let"
fileprivate let kStr_infoName:String = "return letnAnim"
fileprivate let kStr_equalTitle:[Character] = ["c","h","e","K","e","y"]

/*: "isConversationIntimateCacheKey" :*/
fileprivate let kStr_intervalName:[Character] = ["i","s","C","o","n","v","e","r","s","a","t","i","o","n","I","n","t","i","m","a","t","e","C","a"]
fileprivate let kStr_toValue:String = "let searchcheKey"

/*: "sendAutoGreetIsTo" :*/
fileprivate let kStr_makeValue:String = "item makesendAut"
fileprivate let kStr_windowValue:[Character] = ["o","G","r","e","e","t","I","s","T","o"]

/*: "SaveInviteCodeKey" :*/
fileprivate let kStr_normalTitleValue:[Character] = ["S","a","v","e","I","n","v","i","t","e","C"]
fileprivate let kStr_contentData:String = "cell share super falseodeKey"

/*: "PrivateChatTipsTitle" :*/
fileprivate let kStr_managerGreetData:[Character] = ["P","r","i","v","a","t"]
fileprivate let kStr_priorityValue:String = "least or name cell secondeC"
fileprivate let kStr_fieldWhiteRegularName:String = "block model sizehatTip"

/*: "/Documents/User/record/" :*/
fileprivate let kStr_itemValue:String = "/Docname layer list status for"
fileprivate let kStr_rawData:[Character] = ["t"]
fileprivate let kStr_delayImageValue:String = "self self status kinds/Us"
fileprivate let kStr_makeTitle:String = "size player layer bottomord/"

/*: "/Documents/User/voice/" :*/
fileprivate let kStr_selectedValue:[Character] = ["/","D","o","c","u","m"]
fileprivate let kStr_sectionName:String = "ents/Ugold center cell quote"
fileprivate let kStr_menuLabelTitle:String = "equal sex view trade addser/v"

/*: "MessageIntimatePhoto" :*/
fileprivate let kStr_backgroundValue:[Character] = ["M","e","s","s","a","g","e","I","n","t","i","m","a","t"]
fileprivate let kStr_regularText:String = "self guard else sourceePhoto"

/*: "IntimateDict_ :*/
fileprivate let kStr_positionValue:[Character] = ["I","n","t","i","m","a","t","e","D","i","c","t","_"]

/*: "MessageIntimateVideo" :*/
fileprivate let kStr_shouldData:String = "Messadata text new none"
fileprivate let kStr_fromData:String = "titlema"
fileprivate let kStr_onText:[Character] = ["d","e","o"]

/*: "MessageAskForGift" :*/
fileprivate let kStr_downData:String = "name item path selfMessage"
fileprivate let kStr_titleName:String = "AskFosize up let"

/*: "AskForGiftArr_ :*/
fileprivate let kStr_propertyTitle:String = "else make self videoAskFor"
fileprivate let kStr_modelVideoContent:String = "show name track content closeGif"
fileprivate let kStr_indexHandleData:[Character] = ["t","A","r","r","_"]

//: Declare String End

// __DEBUG__
// __CLOSE_PRINT__
//
//  CacheReactiveCompatible.swift
//  AbroadTalking
//
//  Created by Hemming on 2022/8/27.
//

//: import UIKit
import UIKit

//: let Defaults = UserDefaults.standard
let kLet_managerValue = UserDefaults.standard

// MARK: - UserDefaults

//: public let TalkingAddrServerUrlSelectIndexKey   = "TalkingAddrServerUrlSelectIndexKey"
public let kLet_micText = String(bytes: kStr_bottomValue.map{buttonList(mode: $0)}, encoding: .utf8)!
// 苹果登录只会在第一次授权时获得昵称信息，需缓存起来，防止用户终止流程再次获取不到昵称
//: public let TalkingAppleLoginNickNameKey             = "TalkingAppleLoginNickNameKey"
public let kLet_clickName = (String(kStr_hiddenValue.suffix(5)) + "ngAppl" + String(kStr_userTitle.prefix(4)) + "inNick" + String(kStr_indexName.suffix(7)))

//: public let TalkingLoginUidCacheKey                  = "TalkingLoginUidCacheKey"                  // uid缓存
public let kLet_bottomText = (String(kStr_nativeData) + String(kStr_backgroundName)) // uid缓存
//: public let TalkingLoginUserInfoCacheKey             = "TalkingLoginUserInfoCacheKey"             // 用户信息缓存
public let kLet_systemName = (String(kStr_addName) + String(kStr_ofValue.prefix(4)) + "eKey") // 用户信息缓存
//: public let TalkingLastLoginTypeCacheKey             = "TalkingLastLoginTypeCacheKey"             // 隐私协议弹窗是否已展示
public let kLet_seatPlayData = (String(kStr_targetName.suffix(5)) + "ngLa" + String(kStr_clearData.suffix(4)) + "ginTy" + String(kStr_userValue.suffix(3)) + String(kStr_nameItemTitle)) // 隐私协议弹窗是否已展示
//: public let TalkingLoginUserConfigKey                = "TalkingLoginUserConfigKey"                // 用户配置接口
public let kLet_netData = (String(kStr_enableTitle) + kStr_statusText.replacingOccurrences(of: "style", with: "y")) // 用户配置接口
//: public let TalkingAppConfigKey                      = "TalkingAppConfigKey"                      // APP配置接口
public let kLet_reasonText = (String(kStr_screenValue.prefix(4)) + "ingAp" + String(kStr_layerContent.suffix(9)) + kStr_equalTargetData.replacingOccurrences(of: "pick", with: "y")) // APP配置接口
//: public let TalkingUserTagCacheUrlKey                = "TalkingUserTagCacheUrlKey"                // 用户标签
public let kLet_firstValue = (String(kStr_timeShowBackgroundName) + String(kStr_shareName)) // 用户标签
//: public let TalkingUserCookiesKey                    = "TalkingUserCookiesKey"                    // 用户cookies
public let kLet_succeedText = (String(kStr_indexContent.prefix(5)) + "ngUser" + String(kStr_viewName) + String(kStr_innerMapText)) // 用户cookies
//: public let TalkingHomeTabTurnOnNotificationsKey     = "TalkingHomeTabTurnOnNotificationsKey"     // homeTab_提醒打开系统通知
public let kLet_tableName = String(bytes: kStr_backData.map{makeWhere(push: $0)}, encoding: .utf8)! // homeTab_提醒打开系统通知
//: public let TalkingMessageTabTurnOnNotificationsKey  = "TalkingMessageTabTurnOnNotificationsKey"  // messageTab_提醒打开系统通知
public let kLet_groupSeatValue = String(bytes: kStr_contentLoadData.map{toMake(text: $0)}, encoding: .utf8)! // messageTab_提醒打开系统通知

//: public let TalkingMessageTabCloseNotificationsKey  = "TalkingMessageTabCloseNotificationsKey"  // message 提醒View关闭缓存
public let kLet_userValue = String(bytes: kStr_managerOverData.map{fromTransform(load: $0)}, encoding: .utf8)! // message 提醒View关闭缓存

//: public let TalkingCallShowTag                = "TalkingCallShowTag"                // 女性接听时展示手势
public let kLet_progressValue = (String(kStr_regularToValue.prefix(5)) + "ngCa" + String(kStr_backgroundData.suffix(9))) // 女性接听时展示手势

//: public let TalkingFirstShowIntimateGuide                = "TalkingFirstShowIntimateGuide"                // 消息详情首次展示亲密度动效
public let kLet_giftTitle = (String(kStr_messageData.prefix(6)) + "gFirs" + String(kStr_succeedAddName.suffix(4)) + "wInti" + String(kStr_likeToForContent.prefix(5)) + "uide") // 消息详情首次展示亲密度动效

// 动态发布提示视图是否展示
//: public var TalkingFreeTipsViewIsShow: String {
public var kLet_timeKeyValue: String {
    //: return "TalkingFreeTipsViewIsShow_\(String(LocationThen.share.loginUserMode.userID))"
    return (String(kStr_clickData.suffix(4)) + "ingFre" + String(kStr_positionTitle.prefix(8)) + String(kStr_modeTargetText.prefix(8))) + "\(String(LocationThen.share.loginUserMode.userID))"
}

// 女性直播“活跃认证说明页”是否已展示
//: public var TalkingLiveTabExplainIsShow: String {
public var kLet_inputText: String {
    //: return "TalkingLiveTabExplainIsShow_\(String(LocationThen.share.loginUserMode.userID))"
    return (String(kStr_modelContent.suffix(4)) + "ingLiveT" + String(kStr_tempValue)) + "\(String(LocationThen.share.loginUserMode.userID))"
}

/// 男性未订阅弹窗是否已展示
//: public var TalkingMaleUnsubscribedAlertIsShow: String {
public var kLet_pingValue: String {
    //: return "TalkingMaleUnsubscribedAlertIsShow_\(String(LocationThen.share.loginUserMode.userID))"
    return String(bytes: kStr_levelClearContent.map{moreNor(view: $0)}, encoding: .utf8)! + "\(String(LocationThen.share.loginUserMode.userID))"
}

// AI亲密度说明弹窗是否已展示
//: public let TalkingAIIntimacyViewIsShow = "TalkingAIIntimacyViewIsShow"
public let kLet_needLiveText = (String(kStr_indexTitle) + kStr_beforeTableText.replacingOccurrences(of: "user", with: "i") + String(kStr_taskData))

//: public let isFirstShowAnimatCacheKey  = "isFirstShowAnimatCacheKey"
public let kLet_buttonValue = (String(kStr_tingValue) + kStr_leadingData.replacingOccurrences(of: "arc", with: "h") + String(kStr_originTitle.suffix(5)) + "matCa" + String(kStr_succeedData.prefix(6)))

//: public let isFirstShowMatchTipsViewCacheKey  = "isFirstShowMatchTipsViewCacheKey"
public let kLet_profileValue = String(bytes: kStr_textValue.map{requestReply(price: $0)}, encoding: .utf8)!

//: public let isShowCleanAnimatCacheKey  = "isShowCleanAnimatCacheKey"
public let kLet_keyTitle = (String(kStr_frameByKeyData.prefix(6)) + "Clea" + String(kStr_infoName.suffix(5)) + "atCa" + String(kStr_equalTitle))

//: public let isConversationIntimateCacheKey  = "isConversationIntimateCacheKey"
public let kLet_errorText = (String(kStr_intervalName) + String(kStr_toValue.suffix(6)))

/// 一键打招呼本地存储key
//: public let TalkingSendAutoGreetIsToKey  = "sendAutoGreetIsTo"
public let kLet_failTitle = (String(kStr_makeValue.suffix(7)) + String(kStr_windowValue))

/// 邀请码
//: public let SaveInviteCodeKey  = "SaveInviteCodeKey"
public let kLet_tableText = (String(kStr_normalTitleValue) + String(kStr_contentData.suffix(6)))

/// 私聊底部提示语_
//: public let PrivateChatTipsTitle  = "PrivateChatTipsTitle"
public let kLet_senseValue = (String(kStr_managerGreetData) + String(kStr_priorityValue.suffix(2)) + String(kStr_fieldWhiteRegularName.suffix(6)) + "sTitle")

/** 语音文件录制存储的路径 */
//: public let Talking_Chat_record_SandboxPath = NSHomeDirectory().appending("/Documents/User/record/")
public let kLet_homeBottomName = NSHomeDirectory().appending((String(kStr_itemValue.prefix(4)) + "umen" + String(kStr_rawData) + String(kStr_delayImageValue.suffix(4)) + "er/rec" + String(kStr_makeTitle.suffix(4))))
//: public let Talking_Chat_voice_SandboxPath = NSHomeDirectory().appending("/Documents/User/voice/")
public let kLet_timeViewContent = NSHomeDirectory().appending((String(kStr_selectedValue) + String(kStr_sectionName.prefix(6)) + String(kStr_menuLabelTitle.suffix(5)) + "oice/"))

//: @objcMembers public class CacheReactiveCompatible: NSObject {
@objcMembers public class CacheReactiveCompatible: NSObject {
    //: @objc public class func getChatRecordPath() -> String {
    @objc public class func writtenAccount() -> String {
        //: return Talking_Chat_record_SandboxPath
        return kLet_homeBottomName
    }

    //: @objc public class func getChatVoicePath() -> String {
    @objc public class func cover() -> String {
        //: return Talking_Chat_voice_SandboxPath
        return kLet_timeViewContent
    }

    /// 获取私密图片本地缓存文件
    //: @objc public static func getIntimatePhotoPath() -> String {
    public static func timeExposure() -> String {
        //: let fm = FileManager.default
        let fm = FileManager.default
        //: guard let cacheDict = fm.urls(for: .cachesDirectory, in: .userDomainMask).first?.appendingPathComponent("MessageIntimatePhoto") else {
        guard let cacheDict = fm.urls(for: .cachesDirectory, in: .userDomainMask).first?.appendingPathComponent((String(kStr_backgroundValue) + String(kStr_regularText.suffix(6)))) else {
            //: return URL(fileURLWithPath: "").path
            return URL(fileURLWithPath: "").path
        }
        //: if !fm.fileExists(atPath: cacheDict.path) {
        if !fm.fileExists(atPath: cacheDict.path) {
            //: try? fm.createDirectory(atPath: cacheDict.path, withIntermediateDirectories: true)
            try? fm.createDirectory(atPath: cacheDict.path, withIntermediateDirectories: true)
        }
        //: let uid = LocationThen.share.loginUid
        let uid = LocationThen.share.loginUid
        //: return cacheDict.appendingPathComponent("IntimateDict_\(uid)").path
        return cacheDict.appendingPathComponent((String(kStr_positionValue)) + "\(uid)").path
    }

    /// 获取私密视频本地缓存文件
    //: @objc public static func getIntimateVideoPath() -> String {
    public static func displayApp() -> String {
        //: let fm = FileManager.default
        let fm = FileManager.default
        //: guard let cacheDict = fm.urls(for: .cachesDirectory, in: .userDomainMask).first?.appendingPathComponent("MessageIntimateVideo") else {
        guard let cacheDict = fm.urls(for: .cachesDirectory, in: .userDomainMask).first?.appendingPathComponent((String(kStr_shouldData.prefix(5)) + "geIn" + kStr_fromData.replacingOccurrences(of: "title", with: "ti") + "teVi" + String(kStr_onText))) else {
            //: return URL(fileURLWithPath: "").path
            return URL(fileURLWithPath: "").path
        }
        //: if !fm.fileExists(atPath: cacheDict.path) {
        if !fm.fileExists(atPath: cacheDict.path) {
            //: try? fm.createDirectory(atPath: cacheDict.path, withIntermediateDirectories: true)
            try? fm.createDirectory(atPath: cacheDict.path, withIntermediateDirectories: true)
        }
        //: let uid = LocationThen.share.loginUid
        let uid = LocationThen.share.loginUid
        //: return cacheDict.appendingPathComponent("IntimateDict_\(uid)").path
        return cacheDict.appendingPathComponent((String(kStr_positionValue)) + "\(uid)").path
    }

    /// 获取私密视频本地缓存文件
    //: @objc public static func getAskForGiftPath() -> String {
    public static func refuse() -> String {
        //: let fm = FileManager.default
        let fm = FileManager.default
        //: guard let cacheDict = fm.urls(for: .cachesDirectory, in: .userDomainMask).first?.appendingPathComponent("MessageAskForGift") else {
        guard let cacheDict = fm.urls(for: .cachesDirectory, in: .userDomainMask).first?.appendingPathComponent((String(kStr_downData.suffix(7)) + String(kStr_titleName.prefix(5)) + "rGift")) else {
            //: return URL(fileURLWithPath: "").path
            return URL(fileURLWithPath: "").path
        }
        //: if !fm.fileExists(atPath: cacheDict.path) {
        if !fm.fileExists(atPath: cacheDict.path) {
            //: try? fm.createDirectory(atPath: cacheDict.path, withIntermediateDirectories: true)
            try? fm.createDirectory(atPath: cacheDict.path, withIntermediateDirectories: true)
        }
        //: let uid = LocationThen.share.loginUid
        let uid = LocationThen.share.loginUid
        //: return cacheDict.appendingPathComponent("AskForGiftArr_\(uid)").path
        return cacheDict.appendingPathComponent((String(kStr_propertyTitle.suffix(6)) + String(kStr_modelVideoContent.suffix(3)) + String(kStr_indexHandleData)) + "\(uid)").path
    }
}

//: func createMsgVoicePath() {
func constructVolumeItem() {
    //: _ = FileManager.createFolder(folderPath: Talking_Chat_record_SandboxPath)
    _ = FileManager.dataOffPath(folderPath: kLet_homeBottomName)
    //: _ = FileManager.createFolder(folderPath: Talking_Chat_voice_SandboxPath)
    _ = FileManager.dataOffPath(folderPath: kLet_timeViewContent)
}
